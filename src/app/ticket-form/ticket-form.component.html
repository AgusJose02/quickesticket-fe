<div class="container">
  <div>

      <!-- {{currentUrl}} -->
    <h1 *ngIf="currentUrl==='projects'">Nuevo ticket de {{ project?.name }}</h1>
    <h1 *ngIf="currentUrl==='tickets'">Editar ticket</h1>


    <form (ngSubmit)="onSubmit()" #projectForm="ngForm">
      <div class="form-group">
        <label for="title">Título</label>
        <input type="text" class="form-control" id="title" required [(ngModel)]="model.title" name="title" #title="ngModel">
        <div [hidden]="title.valid || title.pristine" class="alert alert-danger">
          Campo obligatorio
        </div>
      </div>

      <div class="form-group">
        <label for="beggining_date">Fecha de inicio</label>
        <p-calendar class="form-control" [(ngModel)]="this.model.beginning_date"
          [showButtonBar]="true" [required]="true" dateFormat="dd/mm/yy"
          name="beggining_date" #beggining_date="ngModel"></p-calendar>
        <div [hidden]="beggining_date.valid || beggining_date.pristine" class="alert alert-danger">
          Campo obligatorio
        </div>
      </div>

      <!-- TODO: REEMPLAZAR INPUT POR CALENDARIO -->
      <div class="form-group">
        <label for="end_date">Fecha de fin</label>
        <p-calendar class="form-control" [(ngModel)]="this.model.end_date"
          [showButtonBar]="true"
          dateFormat="dd/mm/yy" name="end_date"></p-calendar>
        <!-- <input type="text" class="form-control" id="end_date" [(ngModel)]="model.end_date" name="end_date"> -->
      </div>

      <div class="form-group">
        <label for="state">Estado</label>
        <p-dropdown class="form-control" id="state" [options]="ticketStates" [required]="true" [(ngModel)]="model.state" optionLabel="description" optionValue="id" [showClear]="false"
          placeholder="Selecciona un estado" name="state"></p-dropdown>
      </div>

      <div class="form-group">
        <label for="description">Descripción</label>
        <input type="text" class="form-control" id="description" [(ngModel)]="model.description" name="description">
      </div>

      <p>{{ model | json }}</p>

      <button type="submit" class="btn btn-success" [disabled]="!projectForm.form.valid">{{ buttonLabel }}</button>
      <button type="button" class="btn btn-danger" (click)="onCancel()">Cancelar</button>
    </form>
  </div>
</div>